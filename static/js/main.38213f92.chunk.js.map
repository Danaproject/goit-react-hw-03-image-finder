{"version":3,"sources":["components/services/images-api.jsx","components/Searchbar/Searchbar.jsx","components/ImageGallery/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/ModalImage/ModalImage.jsx","components/Container/Container.jsx","App.js","index.js"],"names":["axios","defaults","baseURL","fetchImages","searchQuery","page","get","then","response","console","log","data","hits","catch","error","propTypes","PropTypes","string","isRequired","number","Searchbar","state","query","handleChange","e","setState","currentTarget","value","trim","handleSubmit","preventDefault","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","images","onImageClick","map","id","tags","webformatURL","largeImageURL","onClick","src","alt","data-url","ImageGallery","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","createPortal","children","ModalImage","Container","App","isLoading","showModal","onChangeQuery","options","imagesApi","prevState","scrollTo","top","documentElement","scrollHeight","behavior","finally","dataset","url","toggleModal","onModalImageClose","prevProps","shouldRenderLoadMoreButton","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.38213f92.chunk.js","sourcesContent":["import axios from 'axios';\nimport PropTypes from 'prop-types';\n\n// axios.defaults.headers.common['Authorization'] =\n//   'Bearer 20473685-97e7769accc1d65c6975902f8';\nconst apiKey = '20473685-97e7769accc1d65c6975902f8';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst fetchImages = ({ searchQuery = '', page = 1 }) => {\n  return axios\n    .get(\n      `?q=${searchQuery}&page=${page}&image_type=photo&orientation=horizontal&per_page=12&key=${apiKey}`,\n    )\n    .then(response => {\n      console.log(response.data);\n      return response.data.hits;\n    })\n    .catch(error => console.log(error));\n};\n\nfetchImages.propTypes = {\n  searchQuery: PropTypes.string.isRequired,\n  page: PropTypes.number.isRequired,\n};\n\nexport default { fetchImages };\n","import { Component } from 'react';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = e => {\n    this.setState({ query: e.currentTarget.value.trim() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nexport default Searchbar;\n","import PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({ images, onImageClick }) =>\n  images.map(({ id, tags, webformatURL, largeImageURL }) => (\n    <li key={id} onClick={onImageClick}>\n      <img\n        src={webformatURL}\n        alt={tags}\n        data-url={largeImageURL}\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  ));\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      tags: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n};\n\nexport default ImageGalleryItem;\n","import ImageGalleryItem from './ImageGalleryItem';\n\nconst ImageGallery = ({ images, onImageClick }) => (\n  <ul className=\"ImageGallery\">\n    <ImageGalleryItem images={images} onImageClick={onImageClick} />\n  </ul>\n);\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport './Modal.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import PropTypes from 'prop-types';\n\nconst ModalImage = ({ largeImageURL, tags }) => (\n  <img src={largeImageURL} alt={tags} />\n);\n\nModalImage.propTypes = {\n  largeImageURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n};\nexport default ModalImage;\n","import './Container.css';\n\nconst Container = ({ children }) => <div className=\"Container\">{children}</div>;\n\nexport default Container;\n","import { Component } from 'react';\nimport imagesApi from './components/services/images-api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\nimport ModalImage from './components/ModalImage';\nimport Container from './components/Container';\nimport './styles.css';\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchQuery: '',\n    page: 1,\n    isLoading: false,\n    error: null,\n    showModal: false,\n    largeImageURL: '',\n    tags: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      page: 1,\n      images: [],\n      error: null,\n    });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, page } = this.state;\n    const options = { searchQuery, page };\n\n    this.setState({ isLoading: true });\n\n    imagesApi\n      .fetchImages(options)\n      .then(images => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...images],\n          page: prevState.page + 1,\n        }));\n        console.log(images);\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onImageClick = e => {\n    this.setState({\n      largeImageURL: e.target.dataset.url,\n      tags: e.target.alt,\n    });\n\n    this.toggleModal();\n  };\n\n  onModalImageClose = e => {\n    const { largeImageURL } = this.state;\n    largeImageURL && this.setState(() => ({ largeImageURL: '' }));\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const {\n      images,\n      isLoading,\n      error,\n      showModal,\n      largeImageURL,\n      tags,\n    } = this.state;\n    const shouldRenderLoadMoreButton = images.length > 0 && !isLoading;\n    return (\n      <>\n        {error && <h1>Oops, something's wrong!</h1>}\n        <Searchbar onSubmit={this.onChangeQuery} />\n\n        <Container>\n          <ImageGallery images={images} onImageClick={this.onImageClick} />\n\n          {isLoading && <h1>Loading...</h1>}\n          {shouldRenderLoadMoreButton && (\n            <button type=\"button\" onClick={this.fetchImages} className=\"Button\">\n              Load more\n            </button>\n          )}\n\n          {showModal && (\n            <Modal onClose={this.onModalImageClose}>\n              <ModalImage largeImageURL={largeImageURL} tags={tags} />\n            </Modal>\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}